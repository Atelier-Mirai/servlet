-- 商品コード61から120に高級品を、商品コード121から180に最高級品を追加するSQLです
-- 既存の商品名の前に、高級品には「高級」を最高級品の場合には「最高級」を付与します。
-- 価格は、高級品は五割増し、最高級品は二倍です。

-- lpad(cast(goods_cd::integer+60 as character varying), 10 , '0') は goods_cd に60を加えた商品コードです。
-- lpad(文字列, 10, '0') で文字列が10桁になるよう、左側に'0'埋めします。
-- goods_cd::ingeger は、文字列から整数型へのキャストです。cast(goods_cd as integer) と書くこともできます。
-- cast(goods_cd::integer+60 as character varying) で、整数型にキャストしたのち、再度文字列にキャストしています。

-- 高級品の追加
INSERT INTO goods 
(goods_cd, 
goods_class, 
goods_name, 
goods_notes, 
goods_picture_path, 
goods_price)
SELECT 
lpad(cast(goods_cd::integer+60 as character varying), 10 , '0'), -- 商品コードを+60します
goods_class, 
CONCAT('高級', goods_name), -- 「高級」を商品名の前に付けます
goods_notes,
goods_picture_path,
goods_price * 1.5           -- 価格は五割増しです
FROM goods
LIMIT 60;

-- 最高級品の追加
INSERT INTO goods 
(goods_cd, 
goods_class, 
goods_name, 
goods_notes, 
goods_picture_path, 
goods_price)
SELECT 
lpad(cast(goods_cd::integer+120 as character varying), 10 , '0'), -- 商品コードを+120します
goods_class, 
CONCAT('最高級', goods_name), -- 「最高級」を商品名の前に付けます
goods_notes,
goods_picture_path,
goods_price * 2               -- 価格は二倍です
FROM goods
LIMIT 60;

-- 確認用SQL
SELECT goods_cd, goods_name, goods_price FROM goods;

-- 削除用SQL
DELETE FROM goods WHERE goods_name LIKE '%高級%';


## <input>タグについて
<label for="family_name">姓</label>
<input type="text" id="family_name" name="family_name">
labelタグのfor属性は、inputタグのid属性と対になって、
どのinputタグのためのラベルであるかを示します。

<input type="text" id="family_name" name="family_name" placeholder="山田">
placeholder 属性をつけることで入力例を示せます。

<input type="text" id="family_name" name="family_name" required>
required 属性をつけると、入力必須となります。

以下のCSS を記述することで、
    label:has(+ input[required])::after {
      content: "【必須】";
      color: red;
    }

姓のあとに赤く【必須】と表示されます。
(詳細は css has擬似クラス https://developer.mozilla.org/ja/docs/Web/CSS/:has、
after擬似要素 https://developer.mozilla.org/ja/docs/Web/CSS/::after を参照)

<input type="email">
<input type="tel">
で、iPhone等では、メール入力用、電話番号入力用のキーボードになるので、利便性が高まります。

<input type="number" min="10" max="100" step="5" value="50">
既定値として50が入力された入力枠です。最小値10, 最大値100を設定しています。5つ刻みで値が変化します。
手入力のほか、マウス操作による値変更も可能です。

<input type="date">
日付入力用です。カレンダー表示から日付を選択できます。

より詳しくは、MDN公式サイト https://developer.mozilla.org/ja/docs/Web/HTML/Element/input をご覧ください。



# 初学者の方へ

## 物語のあらすじを掴みましょう
書籍を読まれる際、あらすじを掴むことは、 全体を理解する上で有益です。
まずは大まかに流し込みを行い、あらすじをつかみましょう。
どのような登場人物が現れるのか、全体の鳥瞰図を作成しましょう。
鳥瞰図は、個々の詳細を把握することはできませんが、全体を俯瞰してみることができますので、おおまかな全容の把握に役立ちます。

竹取物語で言えば、竹から生まれたとても美しいかぐや姫が、五人の若者や帝からも求婚されますが、月に帰ってしまうお話です。
あらすじを掴んだら、五人の若者に何を求めたのか、 この物語から汲み取れることは何かなど、思索を深めていきます。

コードが現れると、「どういう意味だろう？」と 考えたくなりますが、「後から詳しく読むから待っていてね」と、まずは一旦棚上げして、物語のあらすじを掴むことに専念しましょう。
物語のあらすじを掴んだら、少し高度を下げて、個々の詳細を把握していきましょう。
## 登場人物を把握しましょう。
竹取物語での登場人物は、大きく分けて、かぐや姫と求婚者たちでした。  

サーブレットJavaでの登場人物は、
大きく分けると、  
１）クライアント（顧客）と成って、画面表示を担当するHTML, JSPファイル達  
２）サーバー（給仕者）と成って、顧客の要求（リクエスト）に応じて、さまざまな応答（レスポンス）を返す Servlet  
が登場します。

喫茶店で、コーヒーを注文するときを想像して下さい。
１）クライアント（顧客）は、「コーヒーを下さい」と要求（リクエスト）します。  
２）サーバー（給仕者＝ウェイター、ウェイトレス）は、「ご注文のコーヒーです」と、応答（レスポンス）を返します。  

ウェブアプリの開発でも同様です。
１）クライアント（ブラウザ=Chrome）は、「index.html」を見せて下さいと、ウェブサーバーに要求（リクエスト）します。  
　　(ブラウザのアドレスバーに、http://localhost:8080/index.html と入力してエンターキーを押すことに相当します)  
２）ウェブサーバー（=tomcat）は、「ご注文のindex.htmlファイルです」と、クライアント(ブラウザ)に応答（レスポンス）を返すので、
受け取ったクライアントは美味しくコーヒーを飲みます（htmlを解釈して画面表示します）

## Eclipse(月蝕)
Java基礎は、さくらエディタで開発しましたが、サーブレットJavaでは、Eclipseという統合開発環境(IDE)を使っています。
Eclipseは多機能です。ファイルの編集はもちろん、Javaファイルのコンパイルや、簡易ウェブサーバーであるTomcatの起動等もできます。

１）クライアント（顧客）と成って、画面表示を担当するHTML, JSPファイル達は、WebContent以下に配置します。  
２）サーバー（給仕者）と成って、顧客の要求（リクエスト）に応じて、さまざまな応答（レスポンス）を返す Servlet 達は src以下に配置します。  

## 完成形を見てみましょう。
http://localhost:8080/index.html/sample/dao/login.html  がそれです。  
ID: taro, PW: hitachi でログインできます。趣味などをいろいろ登録できる機能があります。  
クライアント側（画面表示担当）でいろいろデータを入力する。  
サーブレット側（制御色々担当）では、クライアントから入力されたデータを受け取り、  
　　データベースに照会(select文したり)、照会結果を加工したりなど、  
　　いろいろ処理して、結果をクライアントに返す。  
ことをやっています。
サーブレットで処理したデータを、クライアントに返すために、リクエスト属性やセッション属性を使ったりします。

## 楽しみましょう( ◠‿◠ )
宇宙絶対の真理が書かれている書籍ではありません。
Java基礎の時には、文字が表示されるだけでしたが、
ウェブの世界になると、色もつくようになりましたし、絵も出るようになりました。
いろいろなボタンを押すと、それに応じて、応答もしてくれます。
インタラクション、対話ができます。
少し肩の力を抜いて楽しんでみて下さい。

## おまけ
画面表示が少し殺風景で寂しいと感じる方もいらっしゃるかもしれません。
common.css の二行目から五行目に以下を追記しましょう。

* 画面が桜色になり、入力枠やボタンも装飾がついて楽しくなります。
```css
@import "https://cdn.jsdelivr.net/npm/sakura.css/css/sakura.css";
body { 
    background: #feeeed; /* 桜色 */
}
```


* Eclipse(月蝕)に因んで、青白い月の光の雰囲気を楽しみたい方に。
```css
@import "https://unpkg.com/mvp.css@1.15.0/mvp.css";
body {
    background: #eaf4fc; /* 月白 */
}
```


* 風薫る皐月の空と緑さす新緑のイメージならこちらを。
```css
@import "https://cdn.jsdelivr.net/npm/water.css@2.1.1/out/water.min.css";
body {
    background: #e0ebaf; /* 若芽色 */
}
```



##  ウォーターフォールモデルについて
「さくらマーケット」というネットショップの開発を行っていきます。
ウォーターフォールモデルという開発方法があります。
ちょうど、滝が上から下へ流れ落ちるように、
「要件定義」「設計」「開発（プログラミング）」「テスト」「運用」というそれぞれの工程を経て一つのプロジェクトを達成していきます。

## MVC について
Java基礎やサーブレットJavaで習得した技術を活かして、「開発（プログラミング）」工程はこなせることと思います。
表示を司る「ビュー(html, jsp)」、制御を司る「コントローラ（サーブレット）」、ビジネスロジックを司る「モデル（データの登録等）」を意識すると、開発しやすいです。サーブレットJavaで学習したコードも流用することができます。
## テストについて
テストは、Java基礎の総合演習で、driverと呼ばれるコードとして登場しました。小さなプログラムであれば、手動で動作確認することもできますが、何度も何度も繰り返し確認するのは大変ですし、元のプログラムコードを変更する都度、動作確認するのはとても労力がかかる作業になります。そこで登場するのがテストコードと呼ばれる動作確認を行うためのプログラムです。このテストコードがあることにより、元のコードを変更したら動かなくなるんじゃないだろうか？ と不安を感じることなく、自信を持って元のコードを編集できるようになります。元々のコードをより簡潔で見やすく美しいコードへと改善できるようになります（リファクタリングと言います）。また、どのようなテストを行ったのか、テストコード自身が物語ってくれますので、書かれたコードの品質に自信を持つことができます。

## ドキュメントについて
実際に作られたプログラムは大抵の場合長く使われることになります。運用していく中で、数年後に機能追加等をする際に、仕様を確認したくなるかもしれません。自分で作ったプログラムであれば、しばらくの間は覚えていることでしょうし、何ヶ月か経ったとして忘れていてもコードを読み直し思い出すこともできます。そして全く見たこともない会ったこともない方が頼れるのはドキュメントのみです。百行のコードであれば読んで理解することもできますが、百万行のコードを理解するのは至難の業です。未来の技術者に宛ててのメッセージ、玉手箱です。素敵なドキュメントを残しましょう。
## スケジュールについて
「要件定義」「設計」「開発（プログラミング）」「テスト」「運用」という五つの工程の中で、「開発（プログラミング）」が占める部分は実はほんのわずかです。「運用」は完成してから行われますので除外するとして、単純に割り算しても１／４になります。物事は想定したようにはいかず、遅れが生じることもあるでしょう。スケジュールに余裕がないと精神的にも辛いことになります。「さくらマーケット」はどれくらいの期間で完成できると見積もりますか？ 予備日も含めて、ざっくり１／５くらいでみてもいいかもしれません。
## みんなで創りましょう
プログラミングが得意な人もいれば、そうでない人もいるかと思います。もしかすると、プログラミングが得意な人が全部創ってしまった方が速くできるかもしれませんね。
「全然コード書けなくて、エクセル係してました〜。せっかくJava学んだから、ちょっとだけでもやりたかった・・・」って寂しい思い、悲しい思いはして欲しくないのです。
みんなでいいもの作ろうっていろいろ議論して、アイディアを出し合って、そしてみんなの力を合わせて「出来た〜！ 完成！」って、グループみんなですごい課題を成し遂げた 「勝利した！」「達成した！」って喜んで欲しいです。

Javaに触れるのはこの研修が最後という方もいらっしゃるかもしれません。現場で開発に携わる方でも「要件定義」〜「テスト」までの一連の流れを疑似体験できる機会は貴重です。


個人的には、たとえ小さな一つの機能であったとしても「このログイン機能は、HTMLも書いてJavaも書きました。データベースもやったし、テストもしました。ドキュメントも作りました。わたしの作品です！」って胸を張れるほどに愛おしくなるほどに、創って欲しいです。それがきっと輝く未来を生きるあなたの財産になると思うから。

どうぞ、みんなで楽しんで素晴らしい作品を創り上げてください。そして、勝利と達成の美酒を味わってください！
```

## 皆んなで勝利と達成を

使い古された感があるかもしれません。
そしてそういう方にこそ、もう一度、思いを深めていただきたいのです。
「一人は皆んなの為に。皆んなは一人の為に。」

皆んなで創りましょう。そして皆んなで勝利しましょう。達成しましょう。
プログラミングが得意な人もいれば、そうでない人もいることでしょう。
もしかすると、得意な人が全部創った方が速くできるかもしれません。
「わたしはエクセル係でした。ちょっとだけでもJava書きたかったです」って寂しい思い、悲しい思いはして欲しくないのです。 
もし誰かが流す涙があるとしたら、それは哀しみの泪ではなく、喜びの涕であって欲しい。
拙くてもいい、皆んなの笑顔の上に輝くコードを。
そう言ったら情緒的と笑われるでしょうか。

一つのプロジェクトを完成させる、仕上げるという、短期的な観点であれば、とにもかくにも結果が第一、もしかするとそれで良いかもしれません。
そして、より長期的な時間軸に立って、見ていただきたいのです。
一つには、自身がプロジェクトチームに参画した際にそのような寂しい体験を味わいたいか否か。
もう一つは、自身がプロジェクトをマネージする際に、メンバー一人一人が十全に能力を発揮する「強い」チームを形作るには、何が必要かという観点です。

「一人は皆んなの為に。皆んなは一人の為に。」
ラグビーの標語としてよく用いられますが、選手一人一人は、チームの勝利という、「同じものを見て」います。
選手一人一人は、個として独立しており、各自の役割を果たします。そして全体として調和しています。円滑に有機的に繋がっています。
（監督から、「田中くん３メートル前へ、山田くん５メートル下がって」などと指示が来るわけではありませんね）
一人のスーパースターが１００回トライして勝つということもあるかもしれませんが、
そのスターがファインプレーできるよう、支援している選手の連携、繋がりにも目を向けたいものです。

「繋ぐ」と言えば、箱根駅伝もそうですね。
十人の選手が一本の襷（たすき）を繋いで、箱根までの道のりを駆け抜けます。
一本の襷に託された思い、込められた想いを繋いで、次の走者へと受け継がれてゆきます。
ここに至るまでにどれほど多くの人々の思いが託されてきたことでしょう。
生まれたとき、入学、卒業などなど、振り返れば、自らの努力それ以上に、
まわりの人々の庇護があり、そしてその思いが分かるが故に、報いるべく努めることが出来る、
自分の力以上のものが発揮できる。
一人だったら走れない。けれども、皆んなの思いがあるからこそ、走り続けられる。
それが感動を生むのかもしれませんね。

皆んなで議論して、アイディアを出して、力を合わせ、
全員で「勝利した！」「達成した！」って、そう笑顔で喜んで欲しいのです。
たとえ小さな一つの機能であったとしても、
「このログイン機能は一週間かかったけれど一生懸命やりました。HTMLも書いたしJavaも書きました。わたしの作品です！」
って胸を張れるほどに愛おしくなるほどに、創って欲しいのです。

それがきっと輝く未来を生きるあなたの財産になると思うから。
どうぞ、みんなで楽しんで素晴らしい作品を創り上げてください。
そして、勝利と達成の美酒を味わってください！


